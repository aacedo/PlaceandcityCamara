<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Engaging Geographies</title>
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="css/styles_general.css" rel="stylesheet" type="text/css" />
    <link href="css/styles_map2.css" rel="stylesheet" type="text/css" />
    <link href="css/leaflet.css" rel="stylesheet" type="text/css" />
    <link href="css/leaflet.draw.css" rel="stylesheet" type="text/css" />
    <link href="css/bootstrap-slider.css" rel="stylesheet" type="text/css" />

</head>

<body>
<!-- ------------------------------- Navbar --------------------------------------------------------------------------------- -->
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header name_navbar col-xs-4 col-sm-5 col-md-5 col-lg-5 visible-lg visible-md visible-sm">
            <a href="index.html" class="name_link"><img src="img/logo_engaging.svg" id="logo_phd">Engaging Geographies</a>
        </div>
        <!--  Visible only xs  -->
        <div class="navbar-header name_navbar col-xs-4 col-sm-5 col-md-5 col-lg-5 visible-xs">
            <a href="index.html" class="name_link"><img src="img/logo_engaging.svg" id="logo_phd"></a>
        </div>
        <ul class="nav navbar-right float-right col-lg-5 col-md-5 col-sm-5 col-xs-8" style="padding-right: 0px;">
            <li class="float-right visible-lg visible-md visible-sm" id="links-navbar">
                <a href="#" style="margin-right:20px" data-toggle="modal" data-target="#myModal2">
                    <span class="glyphicon glyphicon-info-sign btn-lg" id="icon-navbar"></span><br>Help
                </a>
            </li>
            <!--  Visible only xs  -->
            <li class="float-right visible-xs" id="links-navbar">
                <a href="#" style="margin-right:0px; padding-right: 0px" data-toggle="modal" data-target="#myModal2">
                    <span class="glyphicon glyphicon-info-sign btn-lg" style="padding-right: 0px" id="icon-navbar"></span>
                </a>
            </li>
            <li class="float-right visible-lg visible-md visible-sm" id="links-navbar">
                <a href="http://www.engagingeographies.com/blog" id="navbar_xs" style="margin-right:20px; margin-left:0px">
                    <span class="glyphicon glyphicon-file btn-lg" id="icon-navbar"></span><br>Blog
                </a>
            </li>
            <!--  Visible only xs  -->
            <li class="float-right visible-xs" id="links-navbar">
                <a href="http://www.engagingeographies.com/blog" id="navbar_xs" style="margin-right:0px; margin-left:0px">
                    <span class="glyphicon glyphicon-file btn-lg" style="padding-right: 5px" id="icon-navbar"></span>
                </a>
            </li>
            <li class="float-right visible-lg visible-md visible-sm" id="links-navbar">
                <a href="contact.html" style="margin-right:20px; margin-left:0px">
                    <span class="glyphicon glyphicon-envelope btn-lg" id="icon-navbar"></span><br>Contact
                </a>
            </li>
            <!--  Visible only xs  -->
            <li class="float-right visible-xs" id="links-navbar">
                <a href="contact.html" style="margin-right:0px; margin-left:0px">
                    <span class="glyphicon glyphicon-envelope btn-lg" style="padding-right: 5px" id="icon-navbar"></span>
                </a>
            </li>
        </ul>
    </div>
</nav>
<!-- ------------------------------- End Navbar ----------------------------------------------------------------------------- -->
<div class="container-fluid">
    <!-- ------------------------------- Map visible lg md sm  -------------------------------------------------------------------- -->
    <div class="col-lg-6 col-md-6 col-sm-6 visible-lg visible-md visible-sm" style="position: fixed; right: 0px;">
        <div class="panel panel-default">
            <div class="panel-body">
                <div id="map" style="height:84vh; position: relative;">
                    <div class="visible-lg visible-md visible-sm" style="position: absolute; top: 10px; left: 65px; z-index: 998">
                        <button class="btn btn-default btn-md" id="draw_poly" onclick="drawPolygon()">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true" style="margin-right: 5px"></span> Start drawing
                        </button>
                        <button class="btn btn-default btn-md" id="delete_poly">
                            <span class="glyphicon glyphicon-trash" aria-hidden="true" style="margin-right: 5px"></span> Delete area
                        </button>
                    </div>
                    <!-- Button finish -->
                    <a type="button" class="btn btn-primary finish-map">Next</a>
                </div>
            </div> <!-- /.panel-body -->
        </div>  <!-- /.panel-default -->
    </div>  <!-- /.col6 -->
    <!-- ------------------------------- End map ------------------------------------------------------------------------------ -->
    <!-- ------------------------------- Panel left ------------------------------------------------------------------------------ -->
    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
        <div class="panel panel-default">
            <div class="panel-body">
                <!--  Header  -->
                <h5 style="margin-bottom: 20px" class="hidden" id="title_done">Finally, can you draw the areas that you want to participate in their participatory processes.
                </h5>

                <!-- ------------------------------- Questions ----------------------------------------------------- -->
                <div class="show" id="questions_done">
                    <h5>We are almost finishing. Please, answer the following questions regarding Lisbon city.</h5>
                    <hr style="width: 100%">
                    <h5 style="margin-bottom: 20px; padding-top: 0px">
                        Civic engagement
                    </h5>
                    <div class="no-float">
                        <div>
                            <p class="col-lg-6 col-md-12 col-sm-12 col-xs-12" style="padding-left: 0px">In the last 12 months, have you joined together with other people members to address a common problem or issue?</p>
                            <div class="col-md-12 col-sm-12 col-xs-12 col-lg-12" style="padding-left: 5px; padding-right: 5px; margin-bottom: 20px">
                                <label class="radio-inline personal_radio" style="margin-top: -10px; font-size: 12px;">
                                    <input type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1"> 1 Disagree
                                </label>
                                <label class="radio-inline" style="margin-top: -10px; margin-left: 10px; font-size: 12px">
                                    <input type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2"> 2
                                </label>
                                <label class="radio-inline" style="margin-top: -10px; margin-left: 10px; font-size: 12px">
                                    <input type="radio" name="inlineRadioOptions" id="inlineRadio3" value="option3"> 3
                                </label>
                                <label class="radio-inline" style="margin-top: -10px; margin-left: 10px; font-size: 12px">
                                    <input type="radio" name="inlineRadioOptions" id="inlineRadio4" value="option4"> 4
                                </label>
                                <label class="radio-inline" style="margin-top: -10px; margin-left: 10px; font-size: 12px">
                                    <input type="radio" name="inlineRadioOptions" id="inlineRadio5" value="option5"> 5 Agree
                                </label>
                            </div>
                        </div>
                        <div class="no-float"></div>
                        <div>
                            <p class="col-lg-6 col-md-12 col-sm-12 col-xs-12" style="padding-left: 0px">In the last 12 months, have you talked with a local authority or governmental organization about common problems?</p>
                            <div class="col-md-12 col-sm-12 col-xs-12 col-lg-12" style="padding-left: 5px; padding-right: 5px; margin-bottom: 20px">
                                <label class="radio-inline personal_radio" style="margin-top: -10px; font-size: 12px;">
                                    <input type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1"> 1 Disagree
                                </label>
                                <label class="radio-inline" style="margin-top: -10px; margin-left: 10px; font-size: 12px">
                                    <input type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2"> 2
                                </label>
                                <label class="radio-inline" style="margin-top: -10px; margin-left: 10px; font-size: 12px">
                                    <input type="radio" name="inlineRadioOptions" id="inlineRadio3" value="option3"> 3
                                </label>
                                <label class="radio-inline" style="margin-top: -10px; margin-left: 10px; font-size: 12px">
                                    <input type="radio" name="inlineRadioOptions" id="inlineRadio4" value="option4"> 4
                                </label>
                                <label class="radio-inline" style="margin-top: -10px; margin-left: 10px; font-size: 12px">
                                    <input type="radio" name="inlineRadioOptions" id="inlineRadio5" value="option5"> 5 Agree
                                </label>
                            </div>
                        </div>
                        <div class="no-float"></div>
                        <div>
                            <p class="col-lg-6 col-md-12 col-sm-12 col-xs-12" style="padding-left: 0px">In the last 12 months, have you worked with a local authority or governmental organization to solve common problems?</p>
                            <div class="col-md-12 col-sm-12 col-xs-12 col-lg-12" style="padding-left: 5px; padding-right: 5px; margin-bottom: 20px">
                                <label class="radio-inline personal_radio" style="margin-top: -10px; font-size: 12px;">
                                    <input type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1"> 1 Disagree
                                </label>
                                <label class="radio-inline" style="margin-top: -10px; margin-left: 10px; font-size: 12px">
                                    <input type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2"> 2
                                </label>
                                <label class="radio-inline" style="margin-top: -10px; margin-left: 10px; font-size: 12px">
                                    <input type="radio" name="inlineRadioOptions" id="inlineRadio3" value="option3"> 3
                                </label>
                                <label class="radio-inline" style="margin-top: -10px; margin-left: 10px; font-size: 12px">
                                    <input type="radio" name="inlineRadioOptions" id="inlineRadio4" value="option4"> 4
                                </label>
                                <label class="radio-inline" style="margin-top: -10px; margin-left: 10px; font-size: 12px">
                                    <input type="radio" name="inlineRadioOptions" id="inlineRadio5" value="option5"> 5 Agree
                                </label>
                            </div>
                        </div>
                        <div class="no-float"></div>
                        <a type="button" class="btn btn-primary float-right display_questions  display_title"  onclick="changeclass();">Done</a>
                    </div>
                    <!-- -------------------------------  End questions ----------------------------------------------------- -->
                </div> <!-- .col-6 -->
            </div> <!-- .panel-default -->
        </div> <!-- .panel-body -->
        <div class="no-float"></div>
        <!-- ------------------------------- End Panel left ------------------------------------------------------------------------ -->
        <!-- ------------------------------- Map visible xs ---------------------------------------------------------------------------------- -->
        <div class="visible-xs col-xs-12" style="padding: 0px; padding-top: 30px">
            <div class="panel panel-default">
                <div class="panel-body">
                    <div id="map2" style="height:83vh; position: relative;">
                        <div style="position: absolute; top: 10px; left: 40px; z-index: 998">
                            <button class="btn btn-default btn-xs" id="draw_poly" onclick="drawPolygon()" >
                                <span class="glyphicon glyphicon-pencil" aria-hidden="true" style="margin-right: 5px"></span> Start drawing
                            </button>
                            <button class="btn btn-default btn-xs" id="delete_poly">
                                <span class="glyphicon glyphicon-trash" aria-hidden="true" style="margin-right: 5px"></span> Delete area
                            </button>
                        </div>
                        <!-- Button finish -->
                        <a type="button" class="btn btn-primary finish-map">Next</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- ------------------------------- End map ------------------------------------------------------------------------------ -->
    </div> <!-- .container fluid -->
    <!-- ------------------------------- Modal 3 Learn draw --------------------------------------------------------------------- -->
    <div class="modal fade" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- <div class="triangle_draw"></div>
                <div id="rectangle_draw"></div> -->
                <div class="modal-header">
                    Let’s start!! – Please, read the following instructions carefully.
                    <button type="button" class="close" id="icon-link" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <!--  Explanation of the process of drawing  -->
                    <p>This is a web-map survey application for Lisbon city. We invite you to draw whatever size of areas on the map freely. To start, just press Start Mapping at top left</p>
                    <img src="img/draw.png" id="image_draw">
                    <p>and then click on the map to define your first point and as many points as you need to define your area. To close the area, click on the first point again. You can edit the polygon moving any point at any time or delete it pressing the delete area button.</p>
                    <img src="img/delete.png" id="image_draw">
                    <p>You can "pan" the map or zoom in (+ or -) using the map controls and change the base map on top right corner. You can draw as many areas as you need. The more areas you place, the better! Most people place at least four areas per each concept.</p>
                </div> <!--/.modal-body -->
                <div class="no-float"></div>
                <div class="modal-footer" style="border:none;">
                    <div class="float-left" style="color: #A9A9A9; padding-top: 8px">
                        1/3
                    </div>
                    <div class="float-right">
                        <button type="button" class="btn btn-primary btn-next" href="#">Next</button>
                    </div>
                </div>
            </div> <!--/.modal-content -->
        </div> <!--/.modal-dialog -->
    </div> <!--/.modal fade -->
    <!-- ------------------------------- End Modal 3 ---------------------------------------------------------------------------- -->
    <!-- ------------------------------- Modal 4 Learn sliders ------------------------------------------------------------------ -->
    <div class="modal fade" id="myModal4" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header visible-sm visible-md visible-lg">
                    Questions & Sliders.
                    <button type="button" class="close" id="icon-link" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <!--  Visible only xs -->
                <div class="modal-header visible-xs">
                    <button type="button" class="close" id="icon-link" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    Sliders
                </div>
                <div class="modal-body">
                    <!--  Explanation as sliders are used  -->
                    <p>We also want to know your perception regarding the drawn areas. So, please answer the questions h h regarding the areas when is required. We also provide you some tool to characterize the areas  </p>
                    <img src="img/slider.png" id="image_slider" class="col-xs-12 col-sm-10 col-md-10 col-lg-10 col-sm-offset-2 col-md-offset-2 col-lg-offset-2">
                    <div class="no-float"></div>
                    <p style="margin-top: 20px">through moving horizontally the circle inside the sliders, you can give us your opinion (from 0 to 10) about each respective asked item. </p>
                </div> <!--/.modal-body -->
                <div class="no-float"></div>
                <div class="modal-footer" style="border:none;">
                    <div class="float-left" style="color: #A9A9A9; padding-top: 8px">
                        2/3
                    </div>
                    <div class="float-right">
                        <button type="button" class="btn btn-primary btn-next" href="#">Next</button>
                    </div>
                    <div class="float-right" style="padding-top: 8px; margin-right: 20px">
                        <a type="button" class="link-primary btn-prev" href="#">Prev</a>
                    </div>
                </div>
            </div> <!--/.modal-content -->
        </div> <!--/.modal-dialog -->
    </div> <!--/.modal fade -->
    <!-- ------------------------------- End Modal 4 ---------------------------------------------------------------------------- -->
    <!-- ------------------------------- Modal 5 Learn finish ------------------------------------------------------------------- -->
    <div class="modal fade" id="myModal5" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header"  style="border: none">

                    <button type="button" class="close" id="icon-link" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <!--  Explanation finish  -->
                    <p>This is all. When you finish to locate your different areas and to move on to the next activity, press the button next.</p>
                    <img src="img/next.png" class="col-xs-offset-3 col-sm-offset-4 col-md-offset-4 col-lg-offset-4" id="image_finish" style="text-align: center">
                    <h4>Happy mapping!! </h4>
                </div> <!--/.modal-body -->
                <div class="no-float"></div>
                <div class="modal-footer" style="border:none;">
                    <div class="float-left" style="color: #A9A9A9; padding-top: 8px">
                        3/3
                    </div>
                    <div class="float-right">
                        <button type="button" class="btn btn-primary" data-dismiss="modal" aria-label="Close" href="#">Done</button>
                    </div>
                    <div class="float-right" style="padding-top: 8px; margin-right: 20px">
                        <a type="button" class="link-primary btn-prev" href="#">Prev</a>
                    </div>
                </div>
            </div> <!--/.modal-content -->
        </div> <!--/.modal-dialog -->
    </div> <!--/.modal fade -->
    <!-- ------------------------------- End Modal 5 ---------------------------------------------------------------------------- -->




    <script src="js/jquery-3.1.1.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/leaflet.js"></script>
    <script src="js/leaflet-src.js"></script>
    <script src="js/leaflet.draw.js"></script>
    <script src="js/bootstrap-slider.js"></script>
    <script src="js/functions_map2.js"></script>





    <script src="src/edit/handler/Edit.Poly.js"></script>
    <script src="src/edit/handler/Edit.SimpleShape.js"></script>
    <script src="src/edit/handler/Edit.Circle.js"></script>
    <script src="src/edit/handler/Edit.Rectangle.js"></script>

    <script src="src/draw/handler/Draw.Feature.js"></script>
    <script src="src/draw/handler/Draw.Polyline.js"></script>
    <script src="src/draw/handler/Draw.Polygon.js"></script>
    <script src="src/draw/handler/Draw.SimpleShape.js"></script>
    <script src="src/draw/handler/Draw.Rectangle.js"></script>
    <script src="src/draw/handler/Draw.Circle.js"></script>
    <script src="src/draw/handler/Draw.Marker.js"></script>

    <script src="src/ext/TouchEvents.js"></script>
    <script src="src/ext/LatLngUtil.js"></script>
    <script src="src/ext/GeometryUtil.js"></script>
    <script src="src/ext/LineUtil.Intersect.js"></script>
    <script src="src/ext/Polyline.Intersect.js"></script>
    <script src="src/ext/Polygon.Intersect.js"></script>

    <script src="src/Control.Draw.js"></script>
    <script src="src/Tooltip.js"></script>
    <script src="src/Toolbar.js"></script>

    <script src="src/draw/DrawToolbar.js"></script>
    <script src="src/edit/EditToolbar.js"></script>
    <script src="src/edit/handler/EditToolbar.Edit.js"></script>
    <script src="src/edit/handler/EditToolbar.Delete.js"></script>






    <script>


        // LEAFLET MAP + DRAW

        // create a map in the "map" div, set the view to a given place and zoom
        var map = L.map('map', {
            center: [38.7500, -9.1500],
            zoom: 12,
            scrollWheelZoom: false,
        });
        // add an OpenStreetMap tile layer
        L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            // attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        // Customize button draw polygon - personal contribution
        var polygonDrawer = new L.Draw.Polyline(map);

        // Initialise the FeatureGroup to store editable layers
        var drawnItems = new L.FeatureGroup();
        map.addLayer(drawnItems);

        // Initialise the draw control and pass it the FeatureGroup of editable layers
        var drawControl = new L.Control.Draw({
            //position: 'topright',
            draw: {
                polyline: false,
                polygon: false,
                rectangle: false,
                circle: false,
                marker: false
            },
            edit: {
                featureGroup: drawnItems,
                // Customize button delete polygon - personal contribution
                remove: false,
                // Edit polygon when you draw it - personal contribution
                edit: false
            }
        });

        map.addControl(drawControl);

        map.on('draw:created', function (e) {
            var type = e.layerType,
                    layer = e.layer;

            if (type === 'marker') {
                layer.bindPopup('A popup!');
            }
            // Edit polygon when you draw it - personal contribution
            e.layer.editing.enable();

            drawnItems.addLayer(layer);

        });

        map.on('draw:edited', function (e) {
            var layers = e.layers;
            var countOfEditedLayers = 0;
            layers.eachLayer(function(layer) {
                countOfEditedLayers++;
            });
            console.log("Edited " + countOfEditedLayers + " layers");
        });

        // Customize button draw polygon - personal contribution
        function drawPolygon(){
            var polygonDrawer = new L.Draw.Polygon(map, drawControl);
            polygonDrawer.enable();
        }
        // Customize button draw polygon - personal contribution
        $('#draw_poly').on('click',function() {
            drawControl.enable();
        });

        // Customize button delete polygon - personal contribution
        $('#delete_poly').on('click',function(){
            drawnItems.clearLayers();
        });

        // LEAFLET MAP 2 + DRAW

        // create a map in the "map" div, set the view to a given place and zoom
        var map = L.map('map2').setView([38.7500, -9.1500], 12);
        // add an OpenStreetMap tile layer
        L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            // attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        // Customize button draw polygon - personal contribution
        var polygonDrawer = new L.Draw.Polyline(map);

        // Initialise the FeatureGroup to store editable layers
        var drawnItems = new L.FeatureGroup();
        map.addLayer(drawnItems);

        // Initialise the draw control and pass it the FeatureGroup of editable layers
        var drawControl = new L.Control.Draw({
            //position: 'topright',
            draw: {
                polyline: false,
                polygon: false,
                rectangle: false,
                circle: false,
                marker: false
            },
            edit: {
                featureGroup: drawnItems,
                // Customize button delete polygon - personal contribution
                remove: false,
                // Edit polygon when you draw it - personal contribution
                edit: false
            }
        });

        map.addControl(drawControl);

        map.on('draw:created', function (e) {
            var type = e.layerType,
                    layer = e.layer;

            if (type === 'marker') {
                layer.bindPopup('A popup!');
            }
            // Edit polygon when you draw it - personal contribution
            e.layer.editing.enable();

            drawnItems.addLayer(layer);

        });

        map.on('draw:edited', function (e) {
            var layers = e.layers;
            var countOfEditedLayers = 0;
            layers.eachLayer(function(layer) {
                countOfEditedLayers++;
            });
            console.log("Edited " + countOfEditedLayers + " layers");
        });

        // Customize button draw polygon - personal contribution
        function drawPolygon(){
            var polygonDrawer = new L.Draw.Polygon(map, drawControl);
            polygonDrawer.enable();
        }
        // Customize button draw polygon - personal contribution
        $('#draw_poly').on('click',function() {
            drawControl.enable();
        });

        // Customize button delete polygon - personal contribution
        $('#delete_poly').on('click',function(){
            drawnItems.clearLayers();
        });



    </script>

</body>
</html>
