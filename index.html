<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Place and City</title>
<link href="css/bootstrap.css" rel="stylesheet" type="text/css" />
<link href="css/styles_general.css" rel="stylesheet" type="text/css" />
<link href="css/styles_index.css" rel="stylesheet" type="text/css" />
<link href="css/leaflet.css" rel="stylesheet" type="text/css" />
<link href="css/leaflet.draw.css" rel="stylesheet" type="text/css" />
<link href="css/font-awesome.css" rel="stylesheet" type="text/css" />

</head>

<body>



<!-- ------------------------------- End page ------------------------------------------------------------------------------- -->
<!-- ------------------------------- Modal 9 Project's explanation  --------------------------------------------------------- -->
<div class="modal fade" id="myModal9" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        <!--  Explicación del proyecto  -->
        <p>
          The following web-map survey is part of a research project at NOVA IMS, whose the primary objective is to understand how the citizens' place perceptions and their relationships influence participation in a given urban area.
        </p>
        <p>
          The  questionnaire will take you less than 5 minutes, and the mapping activity takes most people around 10 minutes, depending on how many areas you define.
        </p>
        <p>
          With your contribution, will support the improvement of Lisbon municipality participation processes.
        </p>
        <h5 style="text-align: center; margin-top: 30px">
          Do you live in Lisbon?
        </h5>
        <div style="text-align: center; margin-bottom: 40px">
          <label class="radio-inline">
              <input type="radio" name="lisbon_home" value="true" checked="checked"> Yes
          </label>
          <label class="radio-inline">
            <input type="radio" name="lisbon_home"  value="false"> No
          </label>
        </div>
        <p style="font-size: 12px">
          Notes: <br>
          1. All data collected is treated with confidentiality and anonymity, and will not be used for commercial purposes or distributed to third parties. <br>
          2. For more information about this study, please contact us via the following email acedo@novaims.unl.pt (Albert Acedo Sánchez) or visit our blog.<br>
        </p>
      </div> <!--/.modal-body -->
      <div class="container-fluid">

        <div class="row col-xs-12 col-sm-12 col-md-12 col-lg-12" style="text-align: center;">
          <hr style="width: 100%; margin-top: 0px">
          <div style="max-width: 100%">
            <img src="img/geoc.png" id="logo_geoc" alt="Geo-c">
            <img src="img/mariecurie.png" id="logo_marie" alt="Marie Curie">
          </div>
          <div style="max-width: 100%">
          <img src="img/nova.png" id="logo_nova" alt="Nova IMS">
          <img src="img/munster.png" id="logo_munster" alt="Münster">
          <img src="img/uji.png" id="logo_uji" alt="UJI">
          </div>
        </div>
      </div>
      <div class="modal-footer" style="border:none;">
        <div class="float-left" style="color: #A9A9A9; padding-top: 8px">
          1/4
        </div>
        <div class="float-right">
          <button type="button" class="btn btn-primary btn-next" data-dismiss="modal" aria-label="Close" href="#" id="home_button">Next</button>
        </div>
      </div>
    </div> <!--/.modal-content -->
  </div> <!--/.modal-dialog -->
</div> <!--/.modal fade -->
<!-- ------------------------------- End Modal 9 ---------------------------------------------------------------------------- -->

<!-- ------------------------------- Modal 10 Freguesia  --------------------------------------------------------- -->
<div class="modal fade" id="myModal10" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="overflow-y: auto;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
          <b>Please, select the parish where do you live?</b>
      </div>
      <div class="modal-body">
        <ul class="col-lg-6 col-md-6 col-sm-6 col-xs-12" style="list-style:none; margin-bottom: 0px">
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="1" > Ajuda
            </label>
          </li>
          <li class="radio">
            <label>
             <input type="radio" name="freguesia" value="2" > Alcântara
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="3" > Alvalade
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="4" > Areeiro
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="5" > Arroios
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="6" > Avenidas Novas
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="7" > Beato
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="8" > Belém
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="9" > Benfica
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="10" > Campo de Ourique
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="11" > Campolide
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="12" > Carnide
            </label>
          </li>
        </ul>
        <ul class="col-lg-6 col-md-6 col-sm-6 col-xs-12" style="list-style:none; padding-top: 0px">
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="13" > Estrela
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="14" > Lumiar
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="15" > Marvila
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="16" > Misericórdia
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="17" > Olivais
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="18" > Parque das Nações
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="19" > Penha de França
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="20" > Santa Clara
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="21" > Santa Maria Maior
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="22" > Santo António
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="23" > São Domingos de Benfica
            </label>
          </li>
          <li class="radio">
            <label>
              <input type="radio" name="freguesia" value="24" > São Vicente
            </label>
          </li>
          <li class="radio" style="margin-top: 20px">
            <label>
              <input type="radio" name="freguesia" value="25" > None of theme
            </label>
          </li>
        </ul>
      </div> <!--/.modal-body -->
      <div class="modal-footer" style="border:none;">
        <div class="float-left" style="color: #A9A9A9; padding-top: 8px">
          2/4
        </div>
        <div class="float-right">
          <button type="button" class="btn btn-primary btn-next" data-dismiss="modal" aria-label="Close" href="#" id="freguesia_button" disabled>Next</button>
        </div>
        <div class="float-right" style="padding-top: 8px; margin-right: 20px">
          <a type="button" id="freguesia_button_prev" class="link-primary btn-prev" href="#">Prev</a>
        </div>
      </div>
    </div> <!--/.modal-content -->
  </div> <!--/.modal-dialog -->
</div> <!--/.modal fade -->
<!-- ------------------------------- End Modal 10 ---------------------------------------------------------------------------- -->


<!-- ------------------------------- Modal 11 How long lived there  --------------------------------------------------------- -->
<div class="modal fade" id="myModal11" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        <h5 style="text-align: center; margin-top: 40px">
          How long have you lived there?
        </h5>
        <div style="text-align: center">
          <label class="radio-inline">
              <input type="radio" name="howlong" value="1" checked="checked"> Less 1 year
          </label>
          <label class="radio-inline">
            <input type="radio" name="howlong" value="2"> 1-3 years
          </label>
          <label class="radio-inline">
            <input type="radio" name="howlong" value="3"> 3-6 years
          </label>
          <label class="radio-inline">
            <input type="radio" name="howlong" value="4"> more 6 years
          </label>
        </div>
        <h5 style="text-align: center; margin-top: 40px">
          Please enter the zip code where you live.
        </h5>
        <div  class="col-xs-6 col-sm-4 col-md-4 col-lg-4 col-lg-offset-4 col-md-offset-4 col-sm-offset-4 col-xs-offset-3">
          <input class="form-control" style="text-align: center" rows="1" id="zip"  placeholder="1100-100"></input>
        </div>
        <div class="no-float"></div>
        <div class="checkbox col-xs-6 col-sm-4 col-md-4 col-lg-4 col-lg-offset-4 col-md-offset-4 col-sm-offset-4 col-xs-offset-3">
          <label style="font-size: 12px">
            <input type="checkbox" name="no_zip" value="1"> If you don't want to give your zip-code check the box
          </label>
        </div>
      </div> <!--/.modal-body -->
      <div class="no-float"></div>
      <div class="modal-footer" style="border:none;">
        <div class="float-left" style="color: #A9A9A9; padding-top: 8px">
          3/4
        </div>
        <div class="float-right">
          <button type="button" class="btn btn-primary btn-next"  aria-label="Close" id="how_long" href="#">Next</button>
        </div>
        <div class="float-right" style="padding-top: 8px; margin-right: 20px">
          <a type="button" class="link-primary btn-prev" id="how_long_pre" href="#">Prev</a>
        </div>
      </div>
    </div> <!--/.modal-content -->
  </div> <!--/.modal-dialog -->
</div> <!--/.modal fade -->
<!-- ------------------------------- End Modal 11 --------------------------------------------------------------------------- -->
<!-- ------------------------------- Modal 12  Problems in freguesia  -------------------------------------------------------- -->
<div class="modal fade" id="myModal12" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="overflow-y: auto;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <b>Please, select the most important problems in your parish. (Max. 3)</b>
      </div>
      <div class="modal-body" id="problems">
        <!--  ------------- Column 1 ------------ -->
        <ul class="media-list col-lg-6 col-md-6 col-sm-6 col-xs-12" style="list-style:none; padding:0px">
          <li class="media">
            <input type="checkbox" class="col-lg-1 col-md-1 col-sm-1 col-xs-1 col-xs-offset-3" name="problem" value="1">
            <span class="glyphicon glyphicon-road btn-lg col-lg-2 col-md-2 col-sm-2 col-xs-2 icon-freguesia"></span>
            <p class="tematic-freguesia col-lg-8 col-md-8 col-sm-8 col-xs-6">Street paving</p>
          </li>
          <li class="media">
            <input type="checkbox" class="col-lg-1 col-md-1 col-sm-1 col-xs-1 col-xs-offset-3" name="problem" value="2">
            <i class="fa fa-product-hunt fa-lg col-lg-2 col-md-2 col-sm-2 col-xs-2 icon-freguesia_new" aria-hidden="true"></i>
            <p class="tematic-freguesia col-lg-8 col-md-8 col-sm-8 col-xs-6">Parking</p>
          </li>
          <li class="media">
            <input type="checkbox" class="col-lg-1 col-md-1 col-sm-1 col-xs-1 col-xs-offset-3" name="problem" value="3">
            <i class="fa fa-wheelchair fa-lg col-lg-2 col-md-2 col-sm-2 col-xs-2 icon-freguesia_new" aria-hidden="true"></i>
            <p class="tematic-freguesia col-lg-8 col-md-8 col-sm-8 col-xs-6">Accessibility</p>
          </li>
          <li class="media">
            <input type="checkbox" class="col-lg-1 col-md-1 col-sm-1 col-xs-1 col-xs-offset-3" name="problem" value="4">
            <span class="glyphicon glyphicon-trash btn-lg col-lg-2 col-md-2 col-sm-2 col-xs-2 icon-freguesia"></span>
            <p class="tematic-freguesia col-lg-8 col-md-8 col-sm-8 col-xs-6">Urban Hygiene</p>
          </li>
          <li class="media">
            <input type="checkbox" class="col-lg-1 col-md-1 col-sm-1 col-xs-1 col-xs-offset-3" name="problem" value="5">
            <span class="glyphicon glyphicon-bullhorn btn-lg col-lg-2 col-md-2 col-sm-2 col-xs-2 icon-freguesia"></span>
            <p class="tematic-freguesia col-lg-8 col-md-8 col-sm-8 col-xs-6">Noise</p>
          </li>
          <li class="media">
            <input type="checkbox" class="col-lg-1 col-md-1 col-sm-1 col-xs-1 col-xs-offset-3" name="problem" value="6">
            <i class="fa fa-building fa-lg col-lg-2 col-md-2 col-sm-2 col-xs-2 icon-freguesia_new" aria-hidden="true"></i>
            <p class="tematic-freguesia col-lg-8 col-md-8 col-sm-8 col-xs-6">Renovate buildings</p>
          </li>
        </ul>
        <!--  ------------- Column 2 ------------ -->
        <ul class="media-list col-lg-6 col-md-6 col-sm-6 col-xs-12" style="list-style:none; padding:0px">
          <li class="media">
            <input type="checkbox" class="col-lg-1 col-md-1 col-sm-1 col-xs-1 col-xs-offset-3" name="problem" value="7">
            <i class="fa fa-subway fa-lg col-lg-2 col-md-2 col-sm-2 col-xs-2 icon-freguesia_new" aria-hidden="true"></i>
            <p class="tematic-freguesia col-lg-8 col-md-8 col-sm-8 col-xs-6">Public transport</p>
          </li>
          <li class="media">
            <input type="checkbox" class="col-lg-1 col-md-1 col-sm-1 col-xs-1 col-xs-offset-3" name="problem" value="8">
            <i class="fa fa-recycle  fa-lg col-lg-2 col-md-2 col-sm-2 col-xs-2 icon-freguesia_new" aria-hidden="true"></i>
            <p class="tematic-freguesia col-lg-8 col-md-8 col-sm-8 col-xs-6">Litter</p>
          </li>
          <li class="media">
            <input type="checkbox" class="col-lg-1 col-md-1 col-sm-1 col-xs-1 col-xs-offset-3" name="problem" value="9">
            <span class="glyphicon glyphicon-warning-sign btn-lg col-lg-2 col-md-2 col-sm-2 col-xs-2 icon-freguesia"></span>
            <p class="tematic-freguesia col-lg-8 col-md-8 col-sm-8 col-xs-6">Safety</p>
          </li>
          <li class="media">
            <input type="checkbox" class="col-lg-1 col-md-1 col-sm-1 col-xs-1 col-xs-offset-3" name="problem" value="10">
            <i class="fa fa-map-signs fa-lg col-lg-2 col-md-2 col-sm-2 col-xs-2 icon-freguesia_new" aria-hidden="true"></i>
            <p class="tematic-freguesia col-lg-8 col-md-8 col-sm-8 col-xs-6">Construction</p>
          </li>
          <li class="media">
            <input type="checkbox" class="col-lg-1 col-md-1 col-sm-1 col-xs-1 col-xs-offset-3" name="problem" value="11">
            <i class="fa fa-car fa-lg col-lg-2 col-md-2 col-sm-2 col-xs-2 icon-freguesia_new" aria-hidden="true"></i>
            <p class="tematic-freguesia col-lg-8 col-md-8 col-sm-8 col-xs-6">Traffic</p>
          </li>
          <li class="media">
            <input type="checkbox" class="col-lg-1 col-md-1 col-sm-1 col-xs-1 col-xs-offset-3" name="problem" value="12">
            <i class="fa fa-lightbulb-o  fa-lg col-lg-2 col-md-2 col-sm-2 col-xs-2 icon-freguesia_new" aria-hidden="true"></i>
            <p class="tematic-freguesia col-lg-8 col-md-8 col-sm-8 col-xs-6">Urban maintenance</p>
          </li>
        </ul>
      </div> <!--/.modal-body -->
      <div class="no-float"></div>
      <div class="modal-footer" style="border:none;">
        <div class="float-left" style="color: #A9A9A9; padding-top: 8px">
          4/4
        </div>
        <div class="float-right">
          <a type="button" class="btn btn-primary" id="done1" >Done</a>
        </div>
        <div class="float-right" style="padding-top: 8px; margin-right: 20px">
          <a type="button" class="link-primary btn-prev" id="done1_pre" href="#">Prev</a>
        </div>
      </div>
    </div> <!--/.modal-content -->
  </div> <!--/.modal-dialog -->
</div> <!--/.modal fade -->
<!-- ------------------------------- End Modal 12 ---------------------------------------------------------------------------- -->



<script src="js/jquery-3.1.1.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/leaflet.js"></script>
<script src="js/leaflet-src.js"></script>
<script src="js/leaflet.draw.js"></script>
<script src="js/functions_index.js"></script>

<script src="src/edit/handler/Edit.Poly.js"></script>
<script src="src/edit/handler/Edit.SimpleShape.js"></script>
<script src="src/edit/handler/Edit.Circle.js"></script>
<script src="src/edit/handler/Edit.Rectangle.js"></script>

<script src="src/draw/handler/Draw.Feature.js"></script>
<script src="src/draw/handler/Draw.Polyline.js"></script>
<script src="src/draw/handler/Draw.Polygon.js"></script>
<script src="src/draw/handler/Draw.SimpleShape.js"></script>
<script src="src/draw/handler/Draw.Rectangle.js"></script>
<script src="src/draw/handler/Draw.Circle.js"></script>
<script src="src/draw/handler/Draw.Marker.js"></script>

<script src="src/ext/TouchEvents.js"></script>
<script src="src/ext/LatLngUtil.js"></script>
<script src="src/ext/GeometryUtil.js"></script>
<script src="src/ext/LineUtil.Intersect.js"></script>
<script src="src/ext/Polyline.Intersect.js"></script>
<script src="src/ext/Polygon.Intersect.js"></script>

<script src="src/Control.Draw.js"></script>
<script src="src/Tooltip.js"></script>
<script src="src/Toolbar.js"></script>

<script src="src/draw/DrawToolbar.js"></script>
<script src="src/edit/EditToolbar.js"></script>
<script src="src/edit/handler/EditToolbar.Edit.js"></script>
<script src="src/edit/handler/EditToolbar.Delete.js"></script>

<script src="js/API/lib.js"></script>

<script src="data/zipCodes.js"></script>

<!--<script src="js/API/util.js"></script>
<script src="js/API/constants.js"></script>
<script src="js/API/coreapi.js"></script>
<script src="js/API/app.js"></script>-->


<script>

  $( document ).ready(function() {



    startall();

  });



</script>


<script>

// LEAFLET MAP + DRAW

// create a map in the "map" div, set the view to a given place and zoom
var map = L.map('map').setView([38.7500, -9.1500], 12);
// add an OpenStreetMap tile layer
L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);
// Customize button draw polygon - personal contribution
var polygonDrawer = new L.Draw.Polyline(map);

// Initialise the FeatureGroup to store editable layers
var drawnItems = new L.FeatureGroup();
map.addLayer(drawnItems);

// Initialise the draw control and pass it the FeatureGroup of editable layers
var drawControl = new L.Control.Draw({
    //position: 'topright',
    draw: {
                polyline: false,
                polygon: false,
                rectangle: false,
                circle: false,
                marker: false
    },
    edit: {
        featureGroup: drawnItems,
        // Customize button delete polygon - personal contribution
        remove: false,
        // Edit polygon when you draw it - personal contribution
        edit: false
    }
});

map.addControl(drawControl);

map.on('draw:created', function (e) {
            var type = e.layerType,
                layer = e.layer;

            if (type === 'marker') {
                layer.bindPopup('A popup!');
            }
            // Edit polygon when you draw it - personal contribution
            e.layer.editing.enable();

            drawnItems.addLayer(layer);

        });

map.on('draw:edited', function (e) {
            var layers = e.layers;
            var countOfEditedLayers = 0;
            layers.eachLayer(function(layer) {
                countOfEditedLayers++;
            });
            console.log("Edited " + countOfEditedLayers + " layers");
        });

// Customize button draw polygon - personal contribution
function drawPolygon(){
  var polygonDrawer = new L.Draw.Polygon(map, drawControl);
  polygonDrawer.enable();
}
// Customize button draw polygon - personal contribution
$('#draw_poly').on('click',function() {
    drawControl.enable();
});

// Customize button delete polygon - personal contribution
$('#delete_poly').on('click',function(){
    drawnItems.clearLayers();
  });

</script>

</body>
</html>
